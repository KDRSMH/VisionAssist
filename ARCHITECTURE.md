# ğŸ—ï¸ System Architecture Diagram

## High-Level Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER (Blind Person)                      â”‚
â”‚                    Interacts via Screen Reader                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ObjectDetectionScreen                         â”‚
â”‚                        (Main Widget)                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              STEP 1: initState()                       â”‚    â”‚
â”‚  â”‚  â€¢ _initializeCamera()                                 â”‚    â”‚
â”‚  â”‚  â€¢ _loadTFLiteModel()                                  â”‚    â”‚
â”‚  â”‚  â€¢ _initializeTTS()                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         STEP 2: build() - Stack Layers                 â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Layer 1: ExcludeSemantics(CameraPreview)             â”‚    â”‚
â”‚  â”‚  Layer 2: CustomPaint(BoundingBoxPainter)             â”‚    â”‚
â”‚  â”‚  Layer 3: MergeSemantics(StatusPanel)                 â”‚    â”‚
â”‚  â”‚  Layer 4: FloatingActionButton (Start/Stop)           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STEP 3: Image Stream Loop                      â”‚
â”‚                  controller.startImageStream()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  CameraImage (YUV420) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 4: Light Level Check                          â”‚
â”‚          _calculateAverageLuminance()                           â”‚
â”‚                                                                  â”‚
â”‚          if (luminance < 50) {                                  â”‚
â”‚            speak("Ortam Ã§ok karanlÄ±k")                          â”‚
â”‚            return                                               â”‚
â”‚          }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 5: Pre-processing (Isolate recommended)            â”‚
â”‚                  _preprocessImage()                             â”‚
â”‚                                                                  â”‚
â”‚  YUV420 â†’ RGB â†’ Resize(416x416) â†’ Normalize[0,1]              â”‚
â”‚                                                                  â”‚
â”‚  Output: [1, 416, 416, 3] Float32 Tensor                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          STEP 6 & 7: Inference + Parsing                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚         TFLite Interpreter                        â”‚          â”‚
â”‚  â”‚    interpreter.run(input, output)                 â”‚          â”‚
â”‚  â”‚                                                    â”‚          â”‚
â”‚  â”‚  Input:  [1, 416, 416, 3]                        â”‚          â”‚
â”‚  â”‚  Output: [1, 25200, 85]                          â”‚          â”‚
â”‚  â”‚          â†‘                â†‘                       â”‚          â”‚
â”‚  â”‚      predictions    [x,y,w,h,conf,80 classes]   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  DetectionHelper.parseYoloOutput()                              â”‚
â”‚    â€¢ Extract bounding boxes                                     â”‚
â”‚    â€¢ Find max class scores                                      â”‚
â”‚    â€¢ Filter by confidence (> 0.5)                               â”‚
â”‚                                                                  â”‚
â”‚  Output: List<DetectionResult>                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       STEP 8: Non-Maximum Suppression (NMS)                     â”‚
â”‚          DetectionHelper.nonMaxSuppression()                    â”‚
â”‚                                                                  â”‚
â”‚  Algorithm:                                                      â”‚
â”‚  1. Sort by confidence (descending)                             â”‚
â”‚  2. For each box:                                               â”‚
â”‚     - Keep if IoU < 0.45 with higher boxes                     â”‚
â”‚     - Suppress otherwise                                        â”‚
â”‚                                                                  â”‚
â”‚  Output: Filtered List<DetectionResult>                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 9: Prioritization                                  â”‚
â”‚       DetectionHelper.prioritizeDetections()                    â”‚
â”‚                                                                  â”‚
â”‚  Sort by:                                                        â”‚
â”‚  1. Priority Level:                                             â”‚
â”‚     â€¢ HIGH   (car, bus, truck) = Danger                        â”‚
â”‚     â€¢ MEDIUM (person, dog)     = Caution                       â”‚
â”‚     â€¢ LOW    (chair, cup)      = Regular                       â”‚
â”‚  2. Box Area (larger = closer)                                  â”‚
â”‚  3. Confidence                                                   â”‚
â”‚                                                                  â”‚
â”‚  Output: Prioritized List<DetectionResult>                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           STEP 10: Translation                                  â”‚
â”‚       DetectionHelper.getTurkishLabel()                         â”‚
â”‚                                                                  â”‚
â”‚  English â†’ Turkish mapping:                                     â”‚
â”‚    'person'     â†’ 'Ä°nsan'                                       â”‚
â”‚    'car'        â†’ 'Araba'                                       â”‚
â”‚    'bicycle'    â†’ 'Bisiklet'                                    â”‚
â”‚    ... (80 classes total)                                       â”‚
â”‚                                                                  â”‚
â”‚  Each DetectionResult now has turkishLabel                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          STEP 11: TTS with Debouncing                           â”‚
â”‚           _speakWithDebounce()                                  â”‚
â”‚                                                                  â”‚
â”‚  Logic:                                                          â”‚
â”‚  Map<String, DateTime> _lastSpoken                              â”‚
â”‚                                                                  â”‚
â”‚  if (now - _lastSpoken[label] > 2 seconds) {                   â”‚
â”‚    flutterTts.speak(turkishLabel)                              â”‚
â”‚    _lastSpoken[label] = now                                    â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  Prevents: Repeated "Araba, Araba, Araba..." spam              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            STEP 12: UI Update                                   â”‚
â”‚                setState()                                        â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Update _detections list                                      â”‚
â”‚  â€¢ Update _currentStatusText                                    â”‚
â”‚  â€¢ Trigger CustomPaint repaint                                  â”‚
â”‚  â€¢ Update status panel                                          â”‚
â”‚                                                                  â”‚
â”‚  Visual Output:                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚    â”‚  Camera Preview             â”‚                             â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                             â”‚
â”‚    â”‚    â”‚   Ä°nsan    â”‚ â† Red Box â”‚                             â”‚
â”‚    â”‚    â”‚   95%      â”‚           â”‚                             â”‚
â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                             â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                             â”‚
â”‚    â”‚  â”‚  Araba   â”‚ â† Red Box     â”‚                             â”‚
â”‚    â”‚  â”‚  88%     â”‚               â”‚                             â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                             â”‚
â”‚    â”‚                             â”‚                             â”‚
â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                             â”‚
â”‚    â”‚ â”‚   Ä°nsan (Status Panel)  â”‚ â”‚                             â”‚
â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                             â”‚
â”‚    â”‚              [Stop Button]  â”‚                             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                      Loop back to STEP 3
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           STEP 13: Stop Detection                               â”‚
â”‚             User taps Stop button                               â”‚
â”‚                                                                  â”‚
â”‚  â€¢ controller.stopImageStream()                                 â”‚
â”‚  â€¢ Clear _detections                                            â”‚
â”‚  â€¢ Update UI: "AlgÄ±lama durduruldu"                            â”‚
â”‚  â€¢ Speak: "AlgÄ±lama durduruldu"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Flutter App Layer                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  main.dart                                                       â”‚
â”‚    â”‚                                                             â”‚
â”‚    â””â”€â–º ObjectDetectionScreen                                    â”‚
â”‚          â”‚                                                       â”‚
â”‚          â”œâ”€â–º CameraController (camera package)                  â”‚
â”‚          â”‚                                                       â”‚
â”‚          â”œâ”€â–º Interpreter (tflite_flutter)                       â”‚
â”‚          â”‚                                                       â”‚
â”‚          â”œâ”€â–º FlutterTts (flutter_tts)                          â”‚
â”‚          â”‚                                                       â”‚
â”‚          â”œâ”€â–º BoundingBoxPainter (CustomPainter)                â”‚
â”‚          â”‚                                                       â”‚
â”‚          â””â”€â–º DetectionHelper (static utilities)                 â”‚
â”‚                 â”‚                                                â”‚
â”‚                 â”œâ”€â–º parseYoloOutput()                           â”‚
â”‚                 â”œâ”€â–º nonMaxSuppression()                         â”‚
â”‚                 â”œâ”€â–º prioritizeDetections()                      â”‚
â”‚                 â””â”€â–º getTurkishLabel()                           â”‚
â”‚                                                                  â”‚
â”‚  Models:                                                         â”‚
â”‚    â””â”€â–º DetectionResult                                          â”‚
â”‚          â”œâ”€ x, y, width, height (Rect)                         â”‚
â”‚          â”œâ”€ confidence (double)                                 â”‚
â”‚          â”œâ”€ label (String)                                      â”‚
â”‚          â”œâ”€ turkishLabel (String)                              â”‚
â”‚          â””â”€ priority (enum)                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Native Platform Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Android:                                                        â”‚
â”‚    â€¢ Camera2 API                                                â”‚
â”‚    â€¢ TFLite AAR                                                 â”‚
â”‚    â€¢ Android TTS Engine                                        â”‚
â”‚                                                                  â”‚
â”‚  iOS:                                                            â”‚
â”‚    â€¢ AVFoundation (Camera)                                      â”‚
â”‚    â€¢ Core ML / Metal (TFLite)                                  â”‚
â”‚    â€¢ AVSpeechSynthesizer (TTS)                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

```
Camera Frame (YUV420)
    â†“
[Image Buffer: ~1.5MB]
    â†“
RGB Conversion + Resize
    â†“
[Tensor: 416x416x3 Float32 = ~2MB]
    â†“
TFLite Inference (~50-100ms)
    â†“
[Output: 25200x85 = 2.1M floats = ~8.4MB]
    â†“
Parse + Filter (confidence > 0.5)
    â†“
[~5-20 DetectionResults]
    â†“
NMS (IoU < 0.45)
    â†“
[~2-10 Filtered Results]
    â†“
Priority Sort
    â†“
[Ordered List]
    â†“
UI Update (60 FPS target)
    â†“
TTS (debounced, 1 announcement per 2s)
    â†“
User Feedback (Audio)
```

---

## Accessibility Flow

```
Screen Reader User Interaction:
    â”‚
    â”œâ”€â–º App Launch
    â”‚    â””â”€â–º Hear: "Nesne algÄ±lama hazÄ±r"
    â”‚
    â”œâ”€â–º Auto-Start Detection
    â”‚    â””â”€â–º Hear: "AlgÄ±lama baÅŸlatÄ±ldÄ±"
    â”‚
    â”œâ”€â–º Object Detected (High Priority)
    â”‚    â””â”€â–º Hear: "Araba" (immediately)
    â”‚
    â”œâ”€â–º Same Object Detected Again (< 2s)
    â”‚    â””â”€â–º (Silence - debounced)
    â”‚
    â”œâ”€â–º Different Object (Medium Priority)
    â”‚    â””â”€â–º Hear: "Ä°nsan"
    â”‚
    â”œâ”€â–º Low Light Condition
    â”‚    â””â”€â–º Hear: "Ortam Ã§ok karanlÄ±k"
    â”‚
    â””â”€â–º User Swipes to Stop Button
         â”œâ”€â–º Screen Reader: "AlgÄ±lamayÄ± Durdur, DÃ¼ÄŸme"
         â”œâ”€â–º User Double-Taps
         â””â”€â–º Hear: "AlgÄ±lama durduruldu"
```

---

## State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App Start  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Initializing    â”‚ _isModelLoaded = false
â”‚  (Loading model, â”‚ _isCameraReady = false
â”‚   camera, TTS)   â”‚ _isStreamActive = false
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ready          â”‚ _isModelLoaded = true
â”‚ (Waiting to      â”‚ _isCameraReady = true
â”‚  start)          â”‚ _isStreamActive = false
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User presses Start
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Detecting      â”‚ _isModelLoaded = true
â”‚ (Active stream,  â”‚ _isCameraReady = true
â”‚  processing)     â”‚ _isStreamActive = true
â”‚                  â”‚ _isDetecting = true (per frame)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User presses Stop
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Paused         â”‚ _isStreamActive = false
â”‚ (Stream stopped) â”‚ _detections = []
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User presses Start again
       â””â”€â”€â–º Back to Detecting
```

---

## Performance Characteristics

| Metric | Value | Notes |
|--------|-------|-------|
| Frame Rate | ~10-15 FPS | Limited by inference time |
| Inference Time | 50-100ms | YOLOv5s on CPU |
| Memory Usage | ~150MB | Model + buffers |
| Battery Drain | ~20% per hour | Continuous camera + CPU |
| TTS Latency | ~200ms | From detection to speech |
| UI Update | 60 FPS | Flutter rendering |

**Optimization Opportunities**:
- GPU Delegate: Reduce inference to 20-30ms
- Isolate Processing: Prevent UI jank
- Frame Skipping: Process every 2nd frame â†’ double FPS budget

---

## File Dependencies

```
main.dart
  â””â”€â–º screens/object_detection_screen.dart
        â”œâ”€â–º package:camera
        â”œâ”€â–º package:tflite_flutter
        â”œâ”€â–º package:flutter_tts
        â”œâ”€â–º package:permission_handler
        â”œâ”€â–º package:image
        â”œâ”€â–º utils/bounding_box_painter.dart
        â”œâ”€â–º utils/detection_helper.dart
        â””â”€â–º models/detection_result.dart

assets/
  â””â”€â–º models/
        â”œâ”€â–º yolov5s.tflite (Required, not included)
        â””â”€â–º labels.txt (Optional reference)
```

---

## Platform-Specific Configurations

```
Android:
  android/app/src/main/AndroidManifest.xml
    â””â”€â–º Camera permissions
    â””â”€â–º Microphone permissions
    â””â”€â–º Hardware features

  android/app/build.gradle
    â””â”€â–º minSdkVersion 21

iOS:
  ios/Runner/Info.plist
    â””â”€â–º NSCameraUsageDescription
    â””â”€â–º NSMicrophoneUsageDescription
    â””â”€â–º NSSpeechRecognitionUsageDescription

  ios/Podfile
    â””â”€â–º platform :ios, '12.0'
```

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Camera Init Fails  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–º Permission Denied
       â”‚    â””â”€â–º Show: "Kamera izni gerekli"
       â”‚
       â”œâ”€â–º No Camera Available
       â”‚    â””â”€â–º Show: "Kamera bulunamadÄ±"
       â”‚
       â””â”€â–º Generic Error
            â””â”€â–º Show: "BaÅŸlatma hatasÄ±"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Model Load Fails   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â–º Show: "Model yÃ¼klenemedi"
           â””â”€â–º Speak: "Model dosyasÄ± bulunamadÄ±"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Inference Fails    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â–º Log error, skip frame, continue

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Low Light Detected â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â–º Show warning, speak once, skip processing
```

---

This architecture provides:
- âœ… Real-time performance
- âœ… Accessibility-first design
- âœ… Robust error handling
- âœ… Modular, maintainable code
- âœ… Platform-agnostic Flutter implementation
